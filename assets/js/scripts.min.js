!function(b){b.fn.fitVids=function(a){var j={customSelector:null};if(!document.getElementById("fit-vids-style")){var i=document.createElement("div"),h=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0],g="&shy;<style>.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>";i.className="fit-vids-style",i.id="fit-vids-style",i.style.display="none",i.innerHTML=g,h.parentNode.insertBefore(i,h)}return a&&b.extend(j,a),this.each(function(){var c=["iframe[src*='player.vimeo.com']","iframe[src*='youtube.com']","iframe[src*='youtube-nocookie.com']","iframe[src*='kickstarter.com'][src*='video.html']","object","embed"];j.customSelector&&c.push(j.customSelector);var e=b(this).find(c.join(","));e=e.not("object object"),e.each(function(){var k=b(this);if(!("embed"===this.tagName.toLowerCase()&&k.parent("object").length||k.parent(".fluid-width-video-wrapper").length)){var o="object"===this.tagName.toLowerCase()||k.attr("height")&&!isNaN(parseInt(k.attr("height"),10))?parseInt(k.attr("height"),10):k.height(),n=isNaN(parseInt(k.attr("width"),10))?k.width():parseInt(k.attr("width"),10),m=o/n;if(!k.attr("id")){var l="fitvid"+Math.floor(999999*Math.random());k.attr("id",l)}k.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*m+"%"),k.removeAttr("height").removeAttr("width")}})})}}(window.jQuery||window.Zepto),function(aU){var aT,aS,aR,aQ,aP,aO,aN,aM="Close",aL="BeforeClose",aK="AfterClose",aJ="BeforeAppend",aI="MarkupParse",aH="Open",aG="Change",aF="mfp",aE="."+aF,aD="mfp-ready",aC="mfp-removing",aB="mfp-prevent-close",aA=function(){},az=!!window.jQuery,ay=aU(window),ax=function(b,d){aT.ev.on(aF+b+aE,d)},aw=function(a,j,i,h){var g=document.createElement("div");return g.className="mfp-"+a,i&&(g.innerHTML=i),h?j&&j.appendChild(g):(g=aU(g),j&&g.appendTo(j)),g},av=function(b,a){aT.ev.triggerHandler(aF+b,a),aT.st.callbacks&&(b=b.charAt(0).toLowerCase()+b.slice(1),aT.st.callbacks[b]&&aT.st.callbacks[b].apply(aT,aU.isArray(a)?a:[a]))},au=function(){(aT.st.focus?aT.content.find(aT.st.focus).eq(0):aT.wrap).trigger("focus")},at=function(a){return a===aN&&aT.currTemplate.closeBtn||(aT.currTemplate.closeBtn=aU(aT.st.closeMarkup.replace("%title%",aT.st.tClose)),aN=a),aT.currTemplate.closeBtn},ar=function(){aU.magnificPopup.instance||(aT=new aA,aT.init(),aU.magnificPopup.instance=aT)},aq=function(f){if(!aU(f).hasClass(aB)){var b=aT.st.closeOnContentClick,a=aT.st.closeOnBgClick;if(b&&a){return !0}if(!aT.content||aU(f).hasClass("mfp-close")||aT.preloader&&f===aT.preloader[0]){return !0}if(f===aT.content[0]||aU.contains(aT.content[0],f)){if(b){return !0}}else{if(a&&aU.contains(document,f)){return !0}}return !1}},ap=function(){var d=document.createElement("p").style,c=["ms","O","Moz","Webkit"];if(void 0!==d.transition){return !0}for(;c.length;){if(c.pop()+"Transition" in d){return !0}}return !1};aA.prototype={constructor:aA,init:function(){var a=navigator.appVersion;aT.isIE7=-1!==a.indexOf("MSIE 7."),aT.isIE8=-1!==a.indexOf("MSIE 8."),aT.isLowIE=aT.isIE7||aT.isIE8,aT.isAndroid=/android/gi.test(a),aT.isIOS=/iphone|ipad|ipod/gi.test(a),aT.supportsTransition=ap(),aT.probablyMobile=aT.isAndroid||aT.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),aR=aU(document.body),aQ=aU(document),aT.popupsCache={}},open:function(t){var s;if(t.isObj===!1){aT.items=t.items.toArray(),aT.index=0;var r,q=t.items;for(s=0;s<q.length;s++){if(r=q[s],r.parsed&&(r=r.el[0]),r===t.el[0]){aT.index=s;break}}}else{aT.items=aU.isArray(t.items)?t.items:[t.items],aT.index=t.index||0}if(aT.isOpen){return aT.updateItemHTML(),void 0}aT.types=[],aO="",aT.ev=t.mainEl&&t.mainEl.length?t.mainEl.eq(0):aQ,t.key?(aT.popupsCache[t.key]||(aT.popupsCache[t.key]={}),aT.currTemplate=aT.popupsCache[t.key]):aT.currTemplate={},aT.st=aU.extend(!0,{},aU.magnificPopup.defaults,t),aT.fixedContentPos="auto"===aT.st.fixedContentPos?!aT.probablyMobile:aT.st.fixedContentPos,aT.st.modal&&(aT.st.closeOnContentClick=!1,aT.st.closeOnBgClick=!1,aT.st.showCloseBtn=!1,aT.st.enableEscapeKey=!1),aT.bgOverlay||(aT.bgOverlay=aw("bg").on("click"+aE,function(){aT.close()}),aT.wrap=aw("wrap").attr("tabindex",-1).on("click"+aE,function(c){aq(c.target)&&aT.close()}),aT.container=aw("container",aT.wrap)),aT.contentContainer=aw("content"),aT.st.preloader&&(aT.preloader=aw("preloader",aT.container,aT.st.tLoading));var n=aU.magnificPopup.modules;for(s=0;s<n.length;s++){var m=n[s];m=m.charAt(0).toUpperCase()+m.slice(1),aT["init"+m].call(aT)}av("BeforeOpen"),aT.st.showCloseBtn&&(aT.st.closeBtnInside?(ax(aI,function(h,f,j,i){j.close_replaceWith=at(i.type)}),aO+=" mfp-close-btn-in"):aT.wrap.append(at())),aT.st.alignTop&&(aO+=" mfp-align-top"),aT.fixedContentPos?aT.wrap.css({overflow:aT.st.overflowY,overflowX:"hidden",overflowY:aT.st.overflowY}):aT.wrap.css({top:ay.scrollTop(),position:"absolute"}),(aT.st.fixedBgPos===!1||"auto"===aT.st.fixedBgPos&&!aT.fixedContentPos)&&aT.bgOverlay.css({height:aQ.height(),position:"absolute"}),aT.st.enableEscapeKey&&aQ.on("keyup"+aE,function(c){27===c.keyCode&&aT.close()}),ay.on("resize"+aE,function(){aT.updateSize()}),aT.st.closeOnContentClick||(aO+=" mfp-auto-cursor"),aO&&aT.wrap.addClass(aO);var g=aT.wH=ay.height(),e={};if(aT.fixedContentPos&&aT._hasScrollBar(g)){var b=aT._getScrollbarSize();b&&(e.paddingRight=b)}aT.fixedContentPos&&(aT.isIE7?aU("body, html").css("overflow","hidden"):e.overflow="hidden");var a=aT.st.mainClass;aT.isIE7&&(a+=" mfp-ie7"),a&&aT._addClassToMFP(a),aT.updateItemHTML(),av("BuildControls"),aU("html").css(e),aT.bgOverlay.add(aT.wrap).prependTo(document.body),aT._lastFocusedEl=document.activeElement,setTimeout(function(){aT.content?(aT._addClassToMFP(aD),au()):aT.bgOverlay.addClass(aD),aQ.on("focusin"+aE,function(d){return d.target===aT.wrap[0]||aU.contains(aT.wrap[0],d.target)?void 0:(au(),!1)})},16),aT.isOpen=!0,aT.updateSize(g),av(aH)},close:function(){aT.isOpen&&(av(aL),aT.isOpen=!1,aT.st.removalDelay&&!aT.isLowIE&&aT.supportsTransition?(aT._addClassToMFP(aC),setTimeout(function(){aT._close()},aT.st.removalDelay)):aT._close())},_close:function(){av(aM);var b=aC+" "+aD+" ";if(aT.bgOverlay.detach(),aT.wrap.detach(),aT.container.empty(),aT.st.mainClass&&(b+=aT.st.mainClass+" "),aT._removeClassFromMFP(b),aT.fixedContentPos){var a={paddingRight:""};aT.isIE7?aU("body, html").css("overflow",""):a.overflow="",aU("html").css(a)}aQ.off("keyup"+aE+" focusin"+aE),aT.ev.off(aE),aT.wrap.attr("class","mfp-wrap").removeAttr("style"),aT.bgOverlay.attr("class","mfp-bg"),aT.container.attr("class","mfp-container"),!aT.st.showCloseBtn||aT.st.closeBtnInside&&aT.currTemplate[aT.currItem.type]!==!0||aT.currTemplate.closeBtn&&aT.currTemplate.closeBtn.detach(),aT._lastFocusedEl&&aU(aT._lastFocusedEl).trigger("focus"),aT.currItem=null,aT.content=null,aT.currTemplate=null,aT.prevHeight=0,av(aK)},updateSize:function(b){if(aT.isIOS){var f=document.documentElement.clientWidth/window.innerWidth,e=window.innerHeight*f;aT.wrap.css("height",e),aT.wH=e}else{aT.wH=b||ay.height()}aT.fixedContentPos||aT.wrap.css("height",aT.wH),av("Resize")},updateItemHTML:function(){var h=aT.items[aT.index];aT.contentContainer.detach(),aT.content&&aT.content.detach(),h.parsed||(h=aT.parseEl(aT.index));var f=h.type;if(av("BeforeChange",[aT.currItem?aT.currItem.type:"",f]),aT.currItem=h,!aT.currTemplate[f]){var b=aT.st[f]?aT.st[f].markup:!1;av("FirstMarkupParse",b),aT.currTemplate[f]=b?aU(b):!0}aP&&aP!==h.type&&aT.container.removeClass("mfp-"+aP+"-holder");var a=aT["get"+f.charAt(0).toUpperCase()+f.slice(1)](h,aT.currTemplate[f]);aT.appendContent(a,f),h.preloaded=!0,av(aG,h),aP=h.type,aT.container.prepend(aT.contentContainer),av("AfterChange")},appendContent:function(b,d){aT.content=b,b?aT.st.showCloseBtn&&aT.st.closeBtnInside&&aT.currTemplate[d]===!0?aT.content.find(".mfp-close").length||aT.content.append(at()):aT.content=b:aT.content="",av(aJ),aT.container.addClass("mfp-"+d+"-holder"),aT.contentContainer.append(aT.content)},parseEl:function(j){var i=aT.items[j],h=i.type;if(i=i.tagName?{el:aU(i)}:{data:i,src:i.src},i.el){for(var b=aT.types,a=0;a<b.length;a++){if(i.el.hasClass("mfp-"+b[a])){h=b[a];break}}i.src=i.el.attr("data-mfp-src"),i.src||(i.src=i.el.attr("href"))}return i.type=h||aT.st.type||"inline",i.index=j,i.parsed=!0,aT.items[j]=i,av("ElementParse",i),aT.items[j]},addGroup:function(b,h){var g=function(a){a.mfpEl=this,aT._openClick(a,b,h)};h||(h={});var f="click.magnificPopup";h.mainEl=b,h.items?(h.isObj=!0,b.off(f).on(f,g)):(h.isObj=!1,h.delegate?b.off(f).on(f,h.delegate,g):(h.items=b,b.off(f).on(f,g)))},_openClick:function(j,i,h){var b=void 0!==h.midClick?h.midClick:aU.magnificPopup.defaults.midClick;if(b||2!==j.which&&!j.ctrlKey&&!j.metaKey){var a=void 0!==h.disableOn?h.disableOn:aU.magnificPopup.defaults.disableOn;if(a){if(aU.isFunction(a)){if(!a.call(aT)){return !0}}else{if(ay.width()<a){return !0}}}j.type&&(j.preventDefault(),aT.isOpen&&j.stopPropagation()),h.el=aU(j.mfpEl),h.delegate&&(h.items=i.find(h.delegate)),aT.open(h)}},updateStatus:function(b,f){if(aT.preloader){aS!==b&&aT.container.removeClass("mfp-s-"+aS),f||"loading"!==b||(f=aT.st.tLoading);var c={status:b,text:f};av("UpdateStatus",c),b=c.status,f=c.text,aT.preloader.html(f),aT.preloader.find("a").on("click",function(d){d.stopImmediatePropagation()}),aT.container.addClass("mfp-s-"+b),aS=b}},_addClassToMFP:function(b){aT.bgOverlay.addClass(b),aT.wrap.addClass(b)},_removeClassFromMFP:function(b){this.bgOverlay.removeClass(b),aT.wrap.removeClass(b)},_hasScrollBar:function(b){return(aT.isIE7?aQ.height():document.body.scrollHeight)>(b||ay.height())},_parseMarkup:function(a,h,g){var f;g.data&&(h=aU.extend(g.data,h)),av(aI,[a,h,g]),aU.each(h,function(b,j){if(void 0===j||j===!1){return !0}if(f=b.split("_"),f.length>1){var i=a.find(aE+"-"+f[0]);if(i.length>0){var e=f[1];"replaceWith"===e?i[0]!==j[0]&&i.replaceWith(j):"img"===e?i.is("img")?i.attr("src",j):i.replaceWith('<img src="'+j+'" class="'+i.attr("class")+'" />'):i.attr(f[1],j)}}else{a.find(aE+"-"+b).html(j)}})},_getScrollbarSize:function(){if(void 0===aT.scrollbarSize){var b=document.createElement("div");b.id="mfp-sbm",b.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(b),aT.scrollbarSize=b.offsetWidth-b.clientWidth,document.body.removeChild(b)}return aT.scrollbarSize}},aU.magnificPopup={instance:null,proto:aA.prototype,modules:[],open:function(d,c){return ar(),d||(d={}),d.isObj=!0,d.index=c||0,this.instance.open(d)},close:function(){return aU.magnificPopup.instance.close()},registerModule:function(a,d){d.options&&(aU.magnificPopup.defaults[a]=d.options),aU.extend(this.proto,d.proto),this.modules.push(a)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},aU.fn.magnificPopup=function(j){ar();var i=aU(this);if("string"==typeof j){if("open"===j){var h,b=az?i.data("magnificPopup"):i[0].magnificPopup,a=parseInt(arguments[1],10)||0;b.items?h=b.items[a]:(h=i,b.delegate&&(h=h.find(b.delegate)),h=h.eq(a)),aT._openClick({mfpEl:h},i,b)}else{aT.isOpen&&aT[j].apply(aT,Array.prototype.slice.call(arguments,1))}}else{az?i.data("magnificPopup",j):i[0].magnificPopup=j,aT.addGroup(i,j)}return i};var ao,an,am,al="inline",ak=function(){am&&(an.after(am.addClass(ao)).detach(),am=null)};aU.magnificPopup.registerModule(al,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){aT.types.push(al),ax(aM+"."+al,function(){ak()})},getInline:function(j,i){if(ak(),j.src){var h=aT.st.inline,b=aU(j.src);if(b.length){var a=b[0].parentNode;a&&a.tagName&&(an||(ao=h.hiddenClass,an=aw(ao),ao="mfp-"+ao),am=b.after(an).detach().removeClass(ao)),aT.updateStatus("ready")}else{aT.updateStatus("error",h.tNotFound),b=aU("<div>")}return j.inlineElement=b,b}return aT.updateStatus("ready"),aT._parseMarkup(i,{},j),i}}});var aj,ai="ajax",ah=function(){aj&&aR.removeClass(aj)};aU.magnificPopup.registerModule(ai,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){aT.types.push(ai),aj=aT.st.ajax.cursor,ax(aM+"."+ai,function(){ah(),aT.req&&aT.req.abort()})},getAjax:function(b){aj&&aR.addClass(aj),aT.updateStatus("loading");var a=aU.extend({url:b.src,success:function(j,i,h){var c={data:j,xhr:h};av("ParseAjax",c),aT.appendContent(aU(c.data),ai),b.finished=!0,ah(),au(),setTimeout(function(){aT.wrap.addClass(aD)},16),aT.updateStatus("ready"),av("AjaxContentAdded")},error:function(){ah(),b.finished=b.loadError=!0,aT.updateStatus("error",aT.st.ajax.tError.replace("%url%",b.src))}},aT.st.ajax.settings);return aT.req=aU.ajax(a),""}}});var ag,af=function(b){if(b.data&&void 0!==b.data.title){return b.data.title}var a=aT.st.image.titleSrc;if(a){if(aU.isFunction(a)){return a.call(aT,b)}if(b.el){return b.el.attr(a)||""}}return""};aU.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><div class="mfp-img"></div><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var b=aT.st.image,d=".image";aT.types.push("image"),ax(aH+d,function(){"image"===aT.currItem.type&&b.cursor&&aR.addClass(b.cursor)}),ax(aM+d,function(){b.cursor&&aR.removeClass(b.cursor),ay.off("resize"+aE)}),ax("Resize"+d,aT.resizeImage),aT.isLowIE&&ax("AfterChange",aT.resizeImage)},resizeImage:function(){var b=aT.currItem;if(b.img&&aT.st.image.verticalFit){var d=0;aT.isLowIE&&(d=parseInt(b.img.css("padding-top"),10)+parseInt(b.img.css("padding-bottom"),10)),b.img.css("max-height",aT.wH-d)}},_onImageHasSize:function(b){b.img&&(b.hasSize=!0,ag&&clearInterval(ag),b.isCheckingImgSize=!1,av("ImageHasSize",b),b.imgHidden&&(aT.content&&aT.content.removeClass("mfp-loading"),b.imgHidden=!1))},findImageSize:function(b){var h=0,g=b.img[0],f=function(a){ag&&clearInterval(ag),ag=setInterval(function(){return g.naturalWidth>0?(aT._onImageHasSize(b),void 0):(h>200&&clearInterval(ag),h++,3===h?f(10):40===h?f(50):100===h&&f(500),void 0)},a)};f(1)},getImage:function(p,o){var n=0,m=function(){p&&(p.img[0].complete?(p.img.off(".mfploader"),p===aT.currItem&&(aT._onImageHasSize(p),aT.updateStatus("ready")),p.hasSize=!0,p.loaded=!0,av("ImageLoadComplete")):(n++,200>n?setTimeout(m,100):l()))},l=function(){p&&(p.img.off(".mfploader"),p===aT.currItem&&(aT._onImageHasSize(p),aT.updateStatus("error",k.tError.replace("%url%",p.src))),p.hasSize=!0,p.loaded=!0,p.loadError=!0)},k=aT.st.image,b=o.find(".mfp-img");if(b.length){var a=new Image;a.className="mfp-img",p.img=aU(a).on("load.mfploader",m).on("error.mfploader",l),a.src=p.src,b.is("img")&&(p.img=p.img.clone()),p.img[0].naturalWidth>0&&(p.hasSize=!0)}return aT._parseMarkup(o,{title:af(p),img_replaceWith:p.img},p),aT.resizeImage(),p.hasSize?(ag&&clearInterval(ag),p.loadError?(o.addClass("mfp-loading"),aT.updateStatus("error",k.tError.replace("%url%",p.src))):(o.removeClass("mfp-loading"),aT.updateStatus("ready")),o):(aT.updateStatus("loading"),p.loading=!0,p.hasSize||(p.imgHidden=!0,o.addClass("mfp-loading"),aT.findImageSize(p)),o)}}});var ae,ad=function(){return void 0===ae&&(ae=void 0!==document.createElement("p").style.MozTransform),ae};aU.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(b){return b.is("img")?b:b.find("img")}},proto:{initZoom:function(){var b=aT.st.zoom,n=".zoom";if(b.enabled&&aT.supportsTransition){var m,l,k=b.duration,j=function(a){var p=a.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),o="all "+b.duration/1000+"s "+b.easing,h={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},g="transition";return h["-webkit-"+g]=h["-moz-"+g]=h["-o-"+g]=h[g]=o,p.css(h),p},i=function(){aT.content.css("visibility","visible")};ax("BuildControls"+n,function(){if(aT._allowZoom()){if(clearTimeout(m),aT.content.css("visibility","hidden"),image=aT._getItemToZoom(),!image){return i(),void 0}l=j(image),l.css(aT._getOffset()),aT.wrap.append(l),m=setTimeout(function(){l.css(aT._getOffset(!0)),m=setTimeout(function(){i(),setTimeout(function(){l.remove(),image=l=null,av("ZoomAnimationEnded")},16)},k)},16)}}),ax(aL+n,function(){if(aT._allowZoom()){if(clearTimeout(m),aT.st.removalDelay=k,!image){if(image=aT._getItemToZoom(),!image){return}l=j(image)}l.css(aT._getOffset(!0)),aT.wrap.append(l),aT.content.css("visibility","hidden"),setTimeout(function(){l.css(aT._getOffset())},16)}}),ax(aM+n,function(){aT._allowZoom()&&(i(),l&&l.remove())})}},_allowZoom:function(){return"image"===aT.currItem.type},_getItemToZoom:function(){return aT.currItem.hasSize?aT.currItem.img:!1},_getOffset:function(l){var k;k=l?aT.currItem.img:aT.st.zoom.opener(aT.currItem.el||aT.currItem);var j=k.offset(),i=parseInt(k.css("padding-top"),10),b=parseInt(k.css("padding-bottom"),10);j.top-=aU(window).scrollTop()-i;var a={width:k.width(),height:(az?k.innerHeight():k[0].offsetHeight)-b-i};return ad()?a["-moz-transform"]=a.transform="translate("+j.left+"px,"+j.top+"px)":(a.left=j.left,a.top=j.top),a}}});var ac="iframe",ab="//about:blank",aa=function(b){if(aT.currTemplate[ac]){var d=aT.currTemplate[ac].find("iframe");d.length&&(b||(d[0].src=ab),aT.isIE8&&d.css("display",b?"block":"none"))}};aU.magnificPopup.registerModule(ac,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){aT.types.push(ac),ax("BeforeChange",function(e,d,f){d!==f&&(d===ac?aa():f===ac&&aa(!0))}),ax(aM+"."+ac,function(){aa()})},getIframe:function(j,i){var h=j.src,b=aT.st.iframe;aU.each(b.patterns,function(){return h.indexOf(this.index)>-1?(this.id&&(h="string"==typeof this.id?h.substr(h.lastIndexOf(this.id)+this.id.length,h.length):this.id.call(this,h)),h=this.src.replace("%id%",h),!1):void 0});var a={};return b.srcAction&&(a[b.srcAction]=h),aT._parseMarkup(i,a,j),aT.updateStatus("ready"),i}}});var Z=function(b){var d=aT.items.length;return b>d-1?b-d:0>b?d+b:b},Y=function(e,d,f){return e.replace("%curr%",d+1).replace("%total%",f)};aU.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var e=aT.st.gallery,b=".mfp-gallery",a=Boolean(aU.fn.mfpFastClick);return aT.direction=!0,e&&e.enabled?(aO+=" mfp-gallery",ax(aH+b,function(){e.navigateByImgClick&&aT.wrap.on("click"+b,".mfp-img",function(){return aT.items.length>1?(aT.next(),!1):void 0}),aQ.on("keydown"+b,function(c){37===c.keyCode?aT.prev():39===c.keyCode&&aT.next()})}),ax("UpdateStatus"+b,function(d,f){f.text&&(f.text=Y(f.text,aT.currItem.index,aT.items.length))}),ax(aI+b,function(c,k,j,i){var h=aT.items.length;j.counter=h>1?Y(e.tCounter,i.index,h):""}),ax("BuildControls"+b,function(){if(aT.items.length>1&&e.arrows&&!aT.arrowLeft){var j=e.arrowMarkup,i=aT.arrowLeft=aU(j.replace("%title%",e.tPrev).replace("%dir%","left")).addClass(aB),f=aT.arrowRight=aU(j.replace("%title%",e.tNext).replace("%dir%","right")).addClass(aB),c=a?"mfpFastClick":"click";i[c](function(){aT.prev()}),f[c](function(){aT.next()}),aT.isIE7&&(aw("b",i[0],!1,!0),aw("a",i[0],!1,!0),aw("b",f[0],!1,!0),aw("a",f[0],!1,!0)),aT.container.append(i.add(f))}}),ax(aG+b,function(){aT._preloadTimeout&&clearTimeout(aT._preloadTimeout),aT._preloadTimeout=setTimeout(function(){aT.preloadNearbyImages(),aT._preloadTimeout=null},16)}),ax(aM+b,function(){aQ.off(b),aT.wrap.off("click"+b),aT.arrowLeft&&a&&aT.arrowLeft.add(aT.arrowRight).destroyMfpFastClick(),aT.arrowRight=aT.arrowLeft=null}),void 0):!1},next:function(){aT.direction=!0,aT.index=Z(aT.index+1),aT.updateItemHTML()},prev:function(){aT.direction=!1,aT.index=Z(aT.index-1),aT.updateItemHTML()},goTo:function(b){aT.direction=b>=aT.index,aT.index=b,aT.updateItemHTML()},preloadNearbyImages:function(){var b,h=aT.st.gallery.preload,g=Math.min(h[0],aT.items.length),f=Math.min(h[1],aT.items.length);for(b=1;b<=(aT.direction?f:g);b++){aT._preloadItem(aT.index+b)}for(b=1;b<=(aT.direction?g:f);b++){aT._preloadItem(aT.index-b)}},_preloadItem:function(b){if(b=Z(b),!aT.items[b].preloaded){var a=aT.items[b];a.parsed||(a=aT.parseEl(b)),av("LazyLoad",a),"image"===a.type&&(a.img=aU('<img class="mfp-img" />').on("load.mfploader",function(){a.hasSize=!0}).on("error.mfploader",function(){a.hasSize=!0,a.loadError=!0,av("LazyLoadError",a)}).attr("src",a.src)),a.preloaded=!0}}}});var X="retina";aU.magnificPopup.registerModule(X,{options:{replaceSrc:function(b){return b.src.replace(/\.\w+$/,function(c){return"@2x"+c})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var b=aT.st.retina,d=b.ratio;d=isNaN(d)?d():d,d>1&&(ax("ImageHasSize."+X,function(e,c){c.img.css({"max-width":c.img[0].naturalWidth/d,width:"100%"})}),ax("ElementParse."+X,function(a,c){c.src=b.replaceSrc(c,d)}))}}}}),function(){var a=1000,j="ontouchstart" in window,i=function(){ay.off("touchmove"+g+" touchend"+g)},h="mfpFastClick",g="."+h;aU.fn.mfpFastClick=function(b){return aU(this).each(function(){var q,p=aU(this);if(j){var o,f,e,d,c,r;p.on("touchstart"+g,function(k){d=!1,r=1,c=k.originalEvent?k.originalEvent.touches[0]:k.touches[0],f=c.clientX,e=c.clientY,ay.on("touchmove"+g,function(l){c=l.originalEvent?l.originalEvent.touches:l.touches,r=c.length,c=c[0],(Math.abs(c.clientX-f)>10||Math.abs(c.clientY-e)>10)&&(d=!0,i())}).on("touchend"+g,function(l){i(),d||r>1||(q=!0,l.preventDefault(),clearTimeout(o),o=setTimeout(function(){q=!1},a),b())})})}p.on("click"+g,function(){q||b()})})},aU.fn.destroyMfpFastClick=function(){aU(this).off("touchstart"+g+" click"+g),j&&ay.off("touchmove"+g+" touchend"+g)}}()}(window.jQuery||window.Zepto),$(function(){$("article").fitVids()}),$(function(){$(".toc h3").click(function(){$("#drawer").toggleClass("hidden")})}),$("a[href$='.jpg'],a[href$='.png'],a[href$='.gif']").addClass("image-popup"),$(document).ready(function(){$(".image-popup").magnificPopup({type:"image",tLoading:"Loading image #%curr%...",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]},image:{tError:'<a href="%url%">Image #%curr%</a> could not be loaded.'},removalDelay:300,mainClass:"mfp-fade"})});(window,document);!function(b){b.fn.simpleJekyllSearch=function(t){function s(){l.keyup(function(){b(this).val().length?q(r(b(this).val())):p()})}function r(d){var e=[];return b.each(m,function(c,f){for(var c=0;c<n.length;c++){void 0!==f[n[c]]&&f[n[c]].toLowerCase().indexOf(d.toLowerCase())>1&&(e.push(f),c=n.length)}}),e}function q(c){p(),a.append(b(o.searchResultsTitle)),c.length?b.each(c,function(f,i){if(f<o.limit){for(var h=o.template,f=0;f<n.length;f++){var g=new RegExp("{"+n[f]+"}","g");h=h.replace(g,i[n[f]])}a.append(b(h))}}):a.append(o.noResults)}function p(){a.children().remove()}var o=b.extend({jsonFile:"/search.json",jsonFormat:"title,category,desc,url,date,shortdate",template:'<a href="{url}" title="{title}">{title}</a>',searchResults:".results",searchResultsTitle:"<h4>Search results</h4>",limit:"10",noResults:"<p>Oh shucks<br/><small>Nothing found :(</small></p>"},t),n=o.jsonFormat.split(","),m=[],l=this,a=b(o.searchResults);o.jsonFile.length&&a.length&&b.ajax({type:"GET",url:o.jsonFile,dataType:"json",success:function(c){m=c,s()},error:function(e,d,f){console.log("***ERROR in simpleJekyllSearch.js***"),console.log(e),console.log(d),console.log(f)}})}}(jQuery);